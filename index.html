<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Countdown OBS-Friendly</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0; width:100vw; height:100vh;
  font-family:"Bauhaus 93",Arial,sans-serif;
  color:white; background:#000; overflow:hidden;
  text-align:center;
}
#headerText{position:absolute;top:50px;left:50%;transform:translateX(-50%);font-size:48px;font-weight:900;}
#countdown{position:absolute;top:150px;left:50%;transform:translateX(-50%);font-size:80px;color:#00ffdd;}
.bottomBox{position:absolute;bottom:50px;right:50px;display:flex;gap:40px;align-items:center;}
#rm300{font-size:100px;font-weight:900;color:#ffe066;}
#qrcode{width:200px;border-radius:20px;}
</style>
</head>
<body>

<div id="headerText">DISKAUN BERAKHIR 31 DISEMBER 2025!</div>
<div id="countdown">--:--:--:--</div>

<div class="bottomBox">
  <div id="rm300">RM300</div>
  <img id="qrcode" src="scan_300.png">
</div>

<script>
const TARGET = new Date(2025,11,31,23,59,59);

// Kawal RM300 ikut jam
function controlRM300(){
  const h=new Date().getHours();
  const box=document.querySelector(".bottomBox");
  box.style.display = (h>=9 && h<22) ? "flex" : "none";
}

// Countdown
function pad(n){return n<10?"0"+n:n;}
function businessDaysLeft(){
  const now=new Date();
  let cur=new Date(now.getFullYear(),now.getMonth(),now.getDate());
  let end=new Date(TARGET.getFullYear(),TARGET.getMonth(),TARGET.getDate());
  let count=0;
  for(let d=new Date(cur);d<=end;d.setDate(d.getDate()+1)){
    const day=d.getDay();
    if(day!==0 && day!==6) count++;
  }
  return count;
}

let lastMin=-1;
function updateCountdown(){
  const now=new Date();
  let diff=TARGET-now; if(diff<0) diff=0;

  const days=businessDaysLeft();
  let t=Math.floor(diff/1000);
  const s=t%60; t=(t-s)/60;
  const m=t%60; t=(t-m)/60;
  const h=t%24;

  document.getElementById("countdown").textContent=
    pad(days)+":"+pad(h)+":"+pad(m)+":"+pad(s);

  // ðŸ”Š Tick flash - OBS friendly
  if(m !== lastMin && typeof OBS_TICK === 'function') OBS_TICK();
  lastMin = m;

  controlRM300();
  if(diff<=0) document.querySelector(".bottomBox").style.display="none";
}

updateCountdown();
setInterval(updateCountdown,1000);
</script>

</body>
</html>
