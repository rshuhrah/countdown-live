<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Countdown OBS Video</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0; width:1920px; height:1080px; /* Full HD */
  background:#000; color:white; font-family:sans-serif; overflow:hidden;
}
#headerText{
  position:absolute; top:50px; left:50%; transform:translateX(-50%);
  font-size:80px; font-weight:900;
  text-align:center;
}
#countdown{
  position:absolute; top:400px; left:50%; transform:translateX(-50%);
  font-size:150px; font-weight:900;
  color:#00ffdd; background:rgba(0,0,0,0.4); padding:20px 40px; border-radius:20px;
}
.bottomBox{
  position:absolute; bottom:50px; right:50px; display:flex; gap:40px; align-items:center;
}
#rm300{ font-size:120px; font-weight:900; color:#ffe066; }
#qrcode{ width:200px; border-radius:20px; }
.flash{
  animation: flashAnim 0.2s ease;
}
@keyframes flashAnim{
  0%{ transform: scale(1); color:#00ffdd; }
  50%{ transform: scale(1.2); color:#ffff00; }
  100%{ transform: scale(1); color:#00ffdd; }
}
</style>
</head>
<body>

<div id="headerText">DISKAUN BERAKHIR 31 DISEMBER 2025!</div>
<div id="countdown">--:--:--:--</div>

<div class="bottomBox">
  <div id="rm300">RM300</div>
  <img id="qrcode" src="scan_300.png">
</div>

<audio id="tick-audio" src="mixkit-tick-tock-clock-close-up-1059.mp3" preload="auto"></audio>

<script>
const TARGET = new Date(2025,11,31,23,59,59);
let lastMin=-1;
const tick=document.getElementById("tick-audio");
tick.volume=0.3;

function pad(n){return n<10?"0"+n:n;}

function controlRM300(){
  const hour=new Date().getHours();
  const box=document.querySelector(".bottomBox");
  if(hour>=9 && hour<22) box.style.display="flex";
  else box.style.display="none";
}

function updateCountdown(){
  const now=new Date();
  let diff=TARGET-now;
  if(diff<0) diff=0;

  let t=Math.floor(diff/1000);
  const s=t%60; t=(t-s)/60;
  const m=t%60; t=(t-m)/60;
  const h=t%24;
  const days=Math.floor(diff/(1000*60*60*24));

  document.getElementById("countdown").textContent=
    pad(days)+":"+pad(h)+":"+pad(m)+":"+pad(s);

  // Tick & flash tiap minit baru
  if(m!==lastMin){
    tick.currentTime=0; tick.play().catch(()=>{});
    document.getElementById("countdown").classList.add("flash");
    setTimeout(()=>{ document.getElementById("countdown").classList.remove("flash"); },200);
    lastMin=m;
  }

  controlRM300();
}

setInterval(updateCountdown,1000);
updateCountdown();
</script>
</body>
</html>
