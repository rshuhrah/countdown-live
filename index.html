<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Countdown â€“ TikTok Vertical</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  width:100vw;
  height:100vh;
  font-family:"Bauhaus 93",Arial,sans-serif;
  color:white;
  background:url("148077-abstract-glowing-cool-blue-wave-background-design.jpg")
    no-repeat center center / cover;
  overflow:hidden;
}

#logoVideo{
  position:absolute;
  top:-150px;
  left:50%;
  transform:translateX(-50%);
  width:1200px;
}

#headerText{
  position:absolute;
  top:450px;
  left:50%;
  transform:translateX(-50%);
  font-size:58px;
  font-weight:900;
  text-shadow:4px 4px 12px rgba(0,0,0,.7);
}

#countdown{
  position:absolute;
  top:550px;
  left:50%;
  transform:translateX(-50%);
  font-size:80px;
  letter-spacing:6px;
  color:#00ffdd;
  background:rgba(0,0,0,.35);
  border-radius:20px;
  padding:12px 30px;
  border:2px solid rgba(0,255,255,.5);
}

.labels{
  position:absolute;
  top:640px;
  left:50%;
  transform:translateX(-50%);
  font-size:28px;
}

.bottomBox{
  position:absolute;
  bottom:50px;
  right:50px;
  display:flex;
  gap:40px;
  align-items:center;
}

#rm300{
  font-size:100px;
  font-weight:900;
  color:#ffe066;
}

#qrcode{
  width:200px;
  border-radius:20px;
}
</style>
</head>

<body>

<video id="logoVideo" autoplay loop muted playsinline>
  <source src="logo_ball_3.webm" type="video/webm">
</video>

<div id="headerText">DISKAUN BERAKHIR 31 DISEMBER 2025!</div>

<div id="countdown">--:--:--:--</div>

<div class="labels">
  Days &nbsp;&nbsp; Hours &nbsp;&nbsp; Minutes &nbsp;&nbsp; Seconds
</div>

<div class="bottomBox">
  <div id="rm300">RM300</div>
  <img id="qrcode" src="scan_300.png">
</div>

<audio id="tick-audio" src="mixkit-tick-tock-clock-close-up-1059.mp3" preload="auto"></audio>
<audio id="silent-unlock" src="mixkit-silent.mp3" preload="auto"></audio>

<script>
/* ================= TARGET ================= */
const TARGET = new Date(2025,11,31,23,59,59);
const holidays = ["2025-12-25"];

/* ================= BUSINESS DAY ================= */
function isExcluded(d){
  const day=d.getDay();
  if(day===0||day===6) return true;
  return holidays.includes(d.toISOString().slice(0,10));
}

function businessDaysLeft(){
  const now=new Date();
  let cur=new Date(now.getFullYear(),now.getMonth(),now.getDate());
  let end=new Date(TARGET.getFullYear(),TARGET.getMonth(),TARGET.getDate());
  let count=0;
  for(let d=new Date(cur);d<=end;d.setDate(d.getDate()+1)){
    if(!isExcluded(d)) count++;
  }
  return count;
}

/* ================= COUNTDOWN ================= */
function pad(n){return n<10?"0"+n:n;}

const tick=document.getElementById("tick-audio");
tick.volume=0.3;
let lastSec=-1;
let soundEnabled=false;

function playTick(sec){
  if(!soundEnabled) return;
  if(sec === 0 && lastSec !== 0){
    tick.currentTime = 0;
    tick.play().catch(()=>{});
  }
  lastSec = sec;
}

/* ðŸ”´ TAMBAH FUNCTION INI */
function controlRM300(){
  const now = new Date();
  const hour = now.getHours(); // 0â€“23
  const box = document.querySelector(".bottomBox");

  // Papar hanya 09:00 â€“ 21:59
  if(hour >= 9 && hour < 22){
    box.style.display = "flex";
  }else{
    box.style.display = "none";
  }
}

function updateCountdown(){
  const now=new Date();
  let diff=TARGET-now;
  if(diff<0) diff=0;

  const days=businessDaysLeft();
  let t=Math.floor(diff/1000);
  const s=t%60; t=(t-s)/60;
  const m=t%60; t=(t-m)/60;
  const h=t%24;

  document.getElementById("countdown").textContent =
    pad(days)+":"+pad(h)+":"+pad(m)+":"+pad(s);

  playTick(s);

  // ðŸ”´ kawal RM300 ikut jam
  controlRM300();

  if(diff<=0){
    document.querySelector(".bottomBox").style.display="none";
  }
}

/* ===== RUN COUNTDOWN ===== */
updateCountdown();
setInterval(updateCountdown,1000);

/* ===== AUDIO UNLOCK ===== */
function unlockAudio(){
  document.getElementById("silent-unlock").play().then(()=>{
    soundEnabled=true;
  }).catch(()=>{});
  window.removeEventListener("click",unlockAudio);
  window.removeEventListener("touchstart",unlockAudio);
}

window.addEventListener("click",unlockAudio);
window.addEventListener("touchstart",unlockAudio);
</script>


</body>
</html>

